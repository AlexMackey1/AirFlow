<!--
Author: Alexander Mackey
Student ID: C22739165
Description: Main HTML template for AirFlow passenger flow visualization with Phase 3A enhancements.
Provides professional UI with navigation bar, hourly predictions chart (NEW), control panel, 
interactive Leaflet map, statistics display, and status bar.

Phase 3A Additions:
- Chart.js CDN for hourly predictions visualization
- Date picker for selecting prediction dates
- Predictions chart panel above map
- Run Prediction button with loading indicator
- Summary statistics for algorithm results

Structure:
- Navigation bar (top): Branding, menu items, airport selector
- Predictions Panel (NEW): Date picker, Chart.js graph, summary stats
- Control panel (left sidebar): Time range, intensity slider, layer toggles, filters, statistics
- Map container (center): Leaflet map with heatmap overlay
- Status bar (bottom): Connection and data status indicators
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AirFlow - Passenger Flow Visualization</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/core/css/style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-brand">
            <i class="fas fa-plane-departure"></i>
            <span class="brand-name">AirFlow</span>
            <span class="brand-tagline">Passenger Flow Analytics</span>
        </div>
        
        <div class="nav-menu">
            <a href="#" class="nav-item active">
                <i class="fas fa-map"></i>
                <span>Live View</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-chart-line"></i>
                <span>Analytics</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-history"></i>
                <span>Historical</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
        </div>
        
        <div class="nav-user">
            <div class="airport-selector">
                <i class="fas fa-location-dot"></i>
                <select id="airport-select">
                    <option value="DUB" selected>Dublin (DUB)</option>
                    <option value="ORK">Cork (ORK)</option>
                    <option value="SNN">Shannon (SNN)</option>
                </select>
            </div>
            <div class="user-avatar">
                <i class="fas fa-user-circle"></i>
            </div>
        </div>
    </nav>

    <!-- PHASE 3A: Predictions Panel -->
    <div class="predictions-panel">
        <div class="predictions-header">
            <div class="predictions-title">
                <i class="fas fa-chart-line"></i>
                Hourly Passenger Predictions
            </div>
            <div class="predictions-controls">
                <input type="date" id="prediction-date" class="date-input">
                <button id="btn-run-prediction" class="btn-predict">
                    <i class="fas fa-play"></i> Run Prediction
                </button>
                <span class="loading-indicator" id="loading-indicator">
                    <i class="fas fa-spinner fa-spin"></i> Calculating...
                </span>
            </div>
        </div>
        
        <div class="chart-container">
            <canvas id="hourlyChart"></canvas>
        </div>
        
        <div class="predictions-summary">
            <div class="summary-card">
                <div class="summary-label">Total Passengers</div>
                <div class="summary-value" id="summary-total">—</div>
            </div>
            <div class="summary-card">
                <div class="summary-label">Peak Hour</div>
                <div class="summary-value" id="summary-peak">—</div>
            </div>
            <div class="summary-card">
                <div class="summary-label">Flights Processed</div>
                <div class="summary-value" id="summary-flights">—</div>
            </div>
            <div class="summary-card">
                <div class="summary-label">Confidence</div>
                <div class="summary-value" id="summary-confidence">—</div>
            </div>
        </div>
    </div>

    <!-- Control Panel (EXISTING - UNCHANGED) -->
    <div class="control-panel">
        <div class="control-section">
            <h3><i class="fas fa-sliders"></i> View Controls</h3>
            
            <div class="control-group">
                <label>
                    <i class="fas fa-clock"></i>
                    Time Range
                </label>
                <select id="time-range">
                    <option value="live" selected>Live (Now)</option>
                    <option value="1h">Last 1 Hour</option>
                    <option value="3h">Last 3 Hours</option>
                    <option value="6h">Last 6 Hours</option>
                    <option value="24h">Last 24 Hours</option>
                </select>
            </div>
            
            <div class="control-group">
                <label>
                    <i class="fas fa-layer-group"></i>
                    Heatmap Intensity
                </label>
                <input type="range" id="intensity-slider" min="0" max="100" value="80">
                <span class="range-value">80%</span>
            </div>
            
            <div class="control-group">
                <label>
                    <i class="fas fa-eye"></i>
                    Display Layers
                </label>
                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" checked id="layer-heatmap">
                        <span>Passenger Heatmap</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="layer-gates">
                        <span>Gate Labels</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="layer-terminals">
                        <span>Terminal Zones</span>
                    </label>
                </div>
            </div>
            
            <div class="control-group">
                <label>
                    <i class="fas fa-filter"></i>
                    Filter by Status
                </label>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">
                        <i class="fas fa-globe"></i> All
                    </button>
                    <button class="filter-btn" data-filter="departing">
                        <i class="fas fa-plane-departure"></i> Departing
                    </button>
                    <button class="filter-btn" data-filter="arriving">
                        <i class="fas fa-plane-arrival"></i> Arriving
                    </button>
                </div>
            </div>
            
            <button class="btn-refresh" id="refresh-btn">
                <i class="fas fa-rotate"></i>
                Refresh Data
            </button>
        </div>
        
        <!-- Stats Panel (EXISTING - UNCHANGED) -->
        <div class="stats-panel">
            <h3><i class="fas fa-chart-bar"></i> Current Statistics</h3>
            
            <div class="stat-item">
                <div class="stat-icon" style="background: #4A90E2;">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Active Passengers</div>
                    <div class="stat-value" id="stat-passengers">—</div>
                </div>
            </div>
            
            <div class="stat-item">
                <div class="stat-icon" style="background: #E24A4A;">
                    <i class="fas fa-fire"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Peak Density Zone</div>
                    <div class="stat-value" id="stat-peak">—</div>
                </div>
            </div>
            
            <div class="stat-item">
                <div class="stat-icon" style="background: #50C878;">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Data Points</div>
                    <div class="stat-value" id="stat-points">—</div>
                </div>
            </div>
            
            <div class="stat-item">
                <div class="stat-icon" style="background: #FFA500;">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Last Updated</div>
                    <div class="stat-value" id="stat-updated">—</div>
                </div>
            </div>
        </div>
        
        <!-- Legend (EXISTING - UNCHANGED) -->
        <div class="legend-panel">
            <h3><i class="fas fa-palette"></i> Density Legend</h3>
            <div class="legend-gradient"></div>
            <div class="legend-labels">
                <span><i class="fas fa-circle" style="color: #0000FF;"></i> Low</span>
                <span><i class="fas fa-circle" style="color: #00FF00;"></i> Medium</span>
                <span><i class="fas fa-circle" style="color: #FF0000;"></i> High</span>
            </div>
        </div>
    </div>

    <!-- Map Container (EXISTING - UNCHANGED except position adjusted) -->
    <div id="map"></div>

    <!-- Status Bar (EXISTING - UNCHANGED) -->
    <div class="status-bar">
        <div class="status-item">
            <i class="fas fa-signal"></i>
            <span id="connection-status">Connected</span>
        </div>
        <div class="status-item">
            <i class="fas fa-database"></i>
            <span id="data-status">Data Loaded</span>
        </div>
        <div class="status-item">
            <i class="fas fa-server"></i>
            <span>Server: Online</span>
        </div>
    </div>

    <!-- Leaflet JS (EXISTING) -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Leaflet Heat Plugin (EXISTING) -->
    <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
    
    <!-- PHASE 3A: Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <!-- Custom JS (EXISTING - will be enhanced for Phase 3A) -->
    <script src="/static/core/js/main.js"></script>
</body>
</html>